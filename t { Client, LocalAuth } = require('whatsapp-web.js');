[1mdiff --git a/whatsapp/index.js b/whatsapp/index.js[m
[1mindex eb80adc..07dc994 100644[m
[1m--- a/whatsapp/index.js[m
[1m+++ b/whatsapp/index.js[m
[36m@@ -1,37 +1,67 @@[m
[31m-const { Client, LocalAuth } = require('whatsapp-web.js');[m
[32m+[m[32mconst { Client } = require('whatsapp-web.js');[m
 const qrcode = require('qrcode-terminal');[m
 const axios = require('axios');[m
[31m-[m
[31m-const client = new Client({[m
[31m-  authStrategy: new LocalAuth(),[m
[31m-  puppeteer: {[m
[31m-    headless: true,[m
[31m-    args: ['--no-sandbox'][m
[31m-  }[m
[31m-});[m
[32m+[m[32mconst client = new Client();[m
 [m
 client.on('qr', qr => {[m
   qrcode.generate(qr, { small: true });[m
[31m-  console.log('ğŸ“² Escanea el cÃ³digo QR desde tu WhatsApp');[m
 });[m
 [m
 client.on('ready', () => {[m
[31m-  console.log('âœ… WhatsApp conectado y listo');[m
[32m+[m[32m  console.log('âœ… Cliente WhatsApp estÃ¡ listo');[m
 });[m
 [m
 client.on('message', async message => {[m
[32m+[m[32m  console.log("ğŸ“¥ Mensaje recibido:", message.body);[m
[32m+[m
   try {[m
     const res = await axios.post('http://localhost:8000/chat/', {[m
       message: message.body,[m
       customer_email: `${message.from}@mailton.com`[m
     });[m
 [m
[31m-    const reply = res.data.ai_response || 'ğŸ¤– Hubo un problema procesando tu mensaje.';[m
[32m+[m[32m    // DEBUG: Veamos exactamente quÃ© devuelve la API[m
[32m+[m[32m    console.log("ğŸ” DEBUG - Status de respuesta:", res.status);[m
[32m+[m[32m    console.log("ğŸ” DEBUG - Datos completos de respuesta:", JSON.stringify(res.data, null, 2));[m
[32m+[m[32m    console.log("ğŸ” DEBUG - Tipo de res.data:", typeof res.data);[m
[32m+[m[32m    console.log("ğŸ” DEBUG - res.data.reply:", res.data.reply);[m
[32m+[m
[32m+[m[32m    // CAMBIO AQUÃ: Extraer solo el texto de respuesta del objeto[m
[32m+[m[32m    let reply;[m
[32m+[m[32m    if (res.data.reply && typeof res.data.reply === 'object') {[m
[32m+[m[32m      // Si reply es un objeto, extraer solo el campo 'response'[m
[32m+[m[32m      reply = res.data.reply.response || 'ğŸ¤– Hubo un problema procesando tu mensaje.';[m
[32m+[m[32m    } else if (typeof res.data.reply === 'string') {[m
[32m+[m[32m      // Si reply es un string, usarlo directamente[m
[32m+[m[32m      reply = res.data.reply;[m
[32m+[m[32m    } else {[m
[32m+[m[32m      reply = 'ğŸ¤– Hubo un problema procesando tu mensaje.';[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    console.log("ğŸ¤– Respuesta enviada:", reply);[m
     client.sendMessage(message.from, reply);[m
[32m+[m
[32m+[m[32m    // LOG ADICIONAL: InformaciÃ³n del anÃ¡lisis[m
[32m+[m[32m    if (res.data.reply && typeof res.data.reply === 'object') {[m
[32m+[m[32m      console.log("ğŸ“Š AnÃ¡lisis del mensaje:");[m
[32m+[m[32m      console.log("  ğŸ¯ IntenciÃ³n:", res.data.reply.intent);[m
[32m+[m[32m      console.log("  ğŸ›ï¸ Productos:", res.data.reply.products_mentioned);[m
[32m+[m[32m      console.log("  ğŸ¨ Colores:", res.data.reply.colors_mentioned);[m
[32m+[m[32m      console.log("  ğŸ“ Tallas:", res.data.reply.sizes_mentioned);[m
[32m+[m[32m      console.log("  ğŸ“ˆ Confianza:", res.data.reply.confidence);[m
[32m+[m[32m    }[m
[32m+[m
   } catch (err) {[m
     console.error('âŒ Error al enviar al backend:', err.message);[m
[32m+[m[41m    [m
[32m+[m[32m    // Si hay error de respuesta, mostrar detalles[m
[32m+[m[32m    if (err.response) {[m
[32m+[m[32m      console.error('âŒ Status de error:', err.response.status);[m
[32m+[m[32m      console.error('âŒ Datos de error:', err.response.data);[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
     client.sendMessage(message.from, 'Lo siento, hubo un error tÃ©cnico. Intenta mÃ¡s tarde.');[m
   }[m
 });[m
 [m
[31m-client.initialize();[m
[32m+[m[32mclient.initialize();[m
\ No newline at end of file[m
